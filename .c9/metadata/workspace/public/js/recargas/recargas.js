{"filter":false,"title":"recargas.js","tooltip":"/public/js/recargas/recargas.js","undoManager":{"mark":89,"position":89,"stack":[[{"start":{"row":0,"column":0},"end":{"row":88,"column":1},"action":"insert","lines":["function datos_distribuidor(distribuidor, periodo){","    $.ajax({","        url:'diagrama/comisiones',","        data:{distribuidor:distribuidor, periodo:periodo},","        type:'GET',","        success: function(data){","            var datos = new Map();","            var datosDiagrama = [];","            var totalPrepago = 0;","            var totalLibre = 0;","            var html = \"\";","            var aux;","            if(data.length == 0){","                $('#valores_subs').html('<label style=\"color:red;font-size:18px\">No tienes ganancias registradas</label>');","                $('#modal-loading').modal('hide');","                return;","            }","            for (var i = 0; i < data.length; i++){","                if(!datos.has(data[i].nombre)){","                    aux = [0,0];","                }else{","                    aux = datos.get(data[i].nombre);","                }","                if(data[i].tipo == 1){","                    aux[0] = Math.floor(data[i].valor*0.62);","                }else{","                    aux[1] = Math.ceil(data[i].valor*0.49);","                }","                datos.set(data[i].nombre,aux);","            }","            var i = 0;","            datos.forEach(function(values, key) {","                html += '<div class=\"historial_container\" style=\"background: ' + colors[i] + '\">' + '<label style=\"min-width:200px\">'  + key + '</label><label class=\"historial_label\" style=\"margin-right:10px;\">$' + addCommas(values[0]) + '</label><label class=\"historial_label\"> $' + addCommas(values[1]) + '</label></div><br>';","                totalPrepago += values[0];","                totalLibre += values[1];","                i++;","            }, datos)","            ","            var retencionPrepago = Math.floor(totalPrepago * 0.01);","            var retencionLibre = Math.floor(totalLibre * 0.01);","            var reteIcaPrepago = Math.floor(totalPrepago * 0.00413);","            var reteIcaLibre = Math.floor(totalLibre * 0.00413);","            html += '<h3 class=\"section-heading text-muted\" style=\"color:black;margin-bottom:20px\">SUBTOTAL</h3><hr><label class=\"historial_label_total\">$' + addCommas(totalPrepago) + '</label><label class=\"historial_label_total\">$' + addCommas(totalLibre) + '</label>';","            html += '<h3 class=\"section-subheading text-muted\" style=\"color:black;margin-bottom:20px\">RETENCION</h3><hr><label class=\"historial_label_total\">$' + addCommas(retencionPrepago) + '</label><label class=\"historial_label_total\">$' + addCommas(retencionLibre) + '</label>';","            html += '<h3 class=\"section-subheading text-muted\" style=\"color:black;margin-bottom:20px\">RETEICA</h3><hr><label class=\"historial_label_total\">$' + addCommas(reteIcaPrepago) + '</label><label class=\"historial_label_total\">$' + addCommas(reteIcaLibre) + '</label>';","            ","            totalPrepago -= (retencionPrepago + reteIcaPrepago);","            totalLibre -= (retencionLibre + reteIcaLibre);","            ","            html += '<h3 class=\"section-heading text-muted\" style=\"color:black;margin-bottom:20px\">TOTAL A PAGAR</h3><hr><label class=\"historial_label_total\">$' + addCommas(totalPrepago+totalLibre) + '</label>';","            var total=totalPrepago+totalLibre;","            datosDiagrama.push(","                        {","                            value: totalLibre,","                            color:\"#7FCA9F\",","                            highlight: \"#3f654f\",","                            label: \"Libre\",","                        }","                    );","            datosDiagrama.push(","                        {","                            value: totalPrepago,","                            color:\"#85C1F5\",","                            highlight: \"#4A789C\",","                            label: \"Prepago\",","                        }","                    );","            $('#valores_subs').html(html);","            diagramaPrepVsLibre.destroy();","            var ctx = document.getElementById(\"canvasHistorial\").getContext(\"2d\");","            diagramaPrepVsLibre = new Chart(ctx).Doughnut(datosDiagrama, options);","            $('#modal-loading').modal('hide');","        }","    });  ","}","","","function addCommas(nStr)","{","    nStr += '';","    var x = nStr.split('.');","    var x1 = x[0];","    var x2 = x.length > 1 ? '.' + x[1] : '';","    var rgx = /(\\d+)(\\d{3})/;","    while (rgx.test(x1)) {","        x1 = x1.replace(rgx, '$1' + ',' + '$2');","    }","    return x1 + x2;","}"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":3}],[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":4}],[{"start":{"row":0,"column":0},"end":{"row":25,"column":190},"action":"insert","lines":["var datosDiagrama=[","            {","                value: 1,","                color:\"gray\",","                highlight: \"gray\",","            }","        ];","        ","var options = {","    segmentShowStroke : true,","    segmentStrokeColor : \"#fff\",","    segmentStrokeWidth : 2,","    percentageInnerCutout : 50,","    animationSteps : 100,","    animationEasing : \"easeOutBounce\",","    animateRotate : true,","    animateScale : false,","    responsive:true,","    maintainAspectRatio:false,","    tooltipTemplate: \"<%if (label){%><%=label%>: <%}%>$<%= addCommas(value) %>\",","    multiTooltipTemplate: \"$<%= addCommas(value) %>\",","}","var ctx = document.getElementById(\"canvasHistorial\").getContext(\"2d\");","var diagramaPrepVsLibre = new Chart(ctx).Doughnut(datosDiagrama, options);  ","// MORADO - AZUL - VERDE - AMARILLO - ROJO - NARANJA - ROSADO - AGUAMARINA - VERDE SUAVE - MAGENTA - CAFE - AMARRILLO - MORADO -AZUL - VERDE - ROJO","var colors = ['#BDAEC6', '#C1DAD6', '#89E894', '#FFFF66', '#E86850', '#ffb366', '#ff9999', '#66d9ff', '#99ff66', '#F49AC2', '#836953', '#FDFD96', '#B19CD9', '#C1DAD6', '#89E894', '#E86850'];"],"id":5}],[{"start":{"row":29,"column":4},"end":{"row":30,"column":0},"action":"insert","lines":["",""],"id":6},{"start":{"row":30,"column":0},"end":{"row":30,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":30,"column":4},"end":{"row":31,"column":0},"action":"insert","lines":["",""],"id":7},{"start":{"row":31,"column":0},"end":{"row":31,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":29,"column":4},"end":{"row":34,"column":10},"action":"insert","lines":["var distribuidor = $('[data-id=\"subPicker_distri\"]').text();","    var periodo = $('[data-id=\"subPicker_periodo\"]').text();","    $('#modal-loading').modal({","        backdrop: 'static',","        keyboard: false","        })"],"id":9}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":4},"action":"remove","lines":["    "],"id":10}],[{"start":{"row":34,"column":10},"end":{"row":35,"column":0},"action":"remove","lines":["",""],"id":11}],[{"start":{"row":28,"column":9},"end":{"row":28,"column":14},"action":"remove","lines":["datos"],"id":12},{"start":{"row":28,"column":9},"end":{"row":28,"column":10},"action":"insert","lines":["c"]}],[{"start":{"row":28,"column":10},"end":{"row":28,"column":11},"action":"insert","lines":["o"],"id":13}],[{"start":{"row":28,"column":11},"end":{"row":28,"column":12},"action":"insert","lines":["n"],"id":14}],[{"start":{"row":28,"column":12},"end":{"row":28,"column":13},"action":"insert","lines":["s"],"id":15}],[{"start":{"row":28,"column":13},"end":{"row":28,"column":14},"action":"insert","lines":["u"],"id":16}],[{"start":{"row":28,"column":14},"end":{"row":28,"column":15},"action":"insert","lines":["l"],"id":17}],[{"start":{"row":28,"column":15},"end":{"row":28,"column":16},"action":"insert","lines":["t"],"id":18}],[{"start":{"row":28,"column":16},"end":{"row":28,"column":17},"action":"insert","lines":["a"],"id":19}],[{"start":{"row":28,"column":17},"end":{"row":28,"column":18},"action":"insert","lines":["r"],"id":20}],[{"start":{"row":28,"column":9},"end":{"row":28,"column":31},"action":"remove","lines":["consultar_distribuidor"],"id":21},{"start":{"row":28,"column":9},"end":{"row":28,"column":27},"action":"insert","lines":["consultar_recargas"]}],[{"start":{"row":30,"column":31},"end":{"row":30,"column":48},"action":"remove","lines":["subPicker_periodo"],"id":22},{"start":{"row":30,"column":31},"end":{"row":30,"column":44},"action":"insert","lines":["subPicker_mes"]}],[{"start":{"row":30,"column":8},"end":{"row":30,"column":15},"action":"remove","lines":["periodo"],"id":23},{"start":{"row":30,"column":8},"end":{"row":30,"column":9},"action":"insert","lines":["m"]}],[{"start":{"row":30,"column":9},"end":{"row":30,"column":10},"action":"insert","lines":["e"],"id":24}],[{"start":{"row":30,"column":10},"end":{"row":30,"column":11},"action":"insert","lines":["s"],"id":25}],[{"start":{"row":37,"column":49},"end":{"row":37,"column":56},"action":"remove","lines":["periodo"],"id":26},{"start":{"row":37,"column":49},"end":{"row":37,"column":50},"action":"insert","lines":["m"]}],[{"start":{"row":37,"column":50},"end":{"row":37,"column":51},"action":"insert","lines":["e"],"id":27}],[{"start":{"row":37,"column":51},"end":{"row":37,"column":52},"action":"insert","lines":["s"],"id":28}],[{"start":{"row":37,"column":41},"end":{"row":37,"column":48},"action":"remove","lines":["periodo"],"id":29},{"start":{"row":37,"column":41},"end":{"row":37,"column":42},"action":"insert","lines":["m"]}],[{"start":{"row":37,"column":42},"end":{"row":37,"column":43},"action":"insert","lines":["e"],"id":30}],[{"start":{"row":37,"column":43},"end":{"row":37,"column":44},"action":"insert","lines":["s"],"id":31}],[{"start":{"row":36,"column":22},"end":{"row":36,"column":32},"action":"remove","lines":["comisiones"],"id":32},{"start":{"row":36,"column":22},"end":{"row":36,"column":23},"action":"insert","lines":["r"]}],[{"start":{"row":36,"column":23},"end":{"row":36,"column":24},"action":"insert","lines":["e"],"id":33}],[{"start":{"row":36,"column":24},"end":{"row":36,"column":25},"action":"insert","lines":["c"],"id":34}],[{"start":{"row":36,"column":25},"end":{"row":36,"column":26},"action":"insert","lines":["a"],"id":35}],[{"start":{"row":36,"column":26},"end":{"row":36,"column":27},"action":"insert","lines":["r"],"id":36}],[{"start":{"row":36,"column":27},"end":{"row":36,"column":28},"action":"insert","lines":["g"],"id":37}],[{"start":{"row":36,"column":28},"end":{"row":36,"column":29},"action":"insert","lines":["a"],"id":38}],[{"start":{"row":36,"column":29},"end":{"row":36,"column":30},"action":"insert","lines":["s"],"id":39}],[{"start":{"row":47,"column":91},"end":{"row":47,"column":100},"action":"remove","lines":["ganancias"],"id":40},{"start":{"row":47,"column":91},"end":{"row":47,"column":92},"action":"insert","lines":["r"]}],[{"start":{"row":47,"column":92},"end":{"row":47,"column":93},"action":"insert","lines":["e"],"id":41}],[{"start":{"row":47,"column":93},"end":{"row":47,"column":94},"action":"insert","lines":["c"],"id":42}],[{"start":{"row":47,"column":94},"end":{"row":47,"column":95},"action":"insert","lines":["a"],"id":43}],[{"start":{"row":47,"column":95},"end":{"row":47,"column":96},"action":"insert","lines":["r"],"id":44}],[{"start":{"row":47,"column":96},"end":{"row":47,"column":97},"action":"insert","lines":["g"],"id":45}],[{"start":{"row":47,"column":97},"end":{"row":47,"column":98},"action":"insert","lines":["a"],"id":46}],[{"start":{"row":47,"column":98},"end":{"row":47,"column":99},"action":"insert","lines":["s"],"id":47}],[{"start":{"row":72,"column":12},"end":{"row":82,"column":12},"action":"remove","lines":["var retencionPrepago = Math.floor(totalPrepago * 0.01);","            var retencionLibre = Math.floor(totalLibre * 0.01);","            var reteIcaPrepago = Math.floor(totalPrepago * 0.00413);","            var reteIcaLibre = Math.floor(totalLibre * 0.00413);","            html += '<h3 class=\"section-heading text-muted\" style=\"color:black;margin-bottom:20px\">SUBTOTAL</h3><hr><label class=\"historial_label_total\">$' + addCommas(totalPrepago) + '</label><label class=\"historial_label_total\">$' + addCommas(totalLibre) + '</label>';","            html += '<h3 class=\"section-subheading text-muted\" style=\"color:black;margin-bottom:20px\">RETENCION</h3><hr><label class=\"historial_label_total\">$' + addCommas(retencionPrepago) + '</label><label class=\"historial_label_total\">$' + addCommas(retencionLibre) + '</label>';","            html += '<h3 class=\"section-subheading text-muted\" style=\"color:black;margin-bottom:20px\">RETEICA</h3><hr><label class=\"historial_label_total\">$' + addCommas(reteIcaPrepago) + '</label><label class=\"historial_label_total\">$' + addCommas(reteIcaLibre) + '</label>';","            ","            totalPrepago -= (retencionPrepago + reteIcaPrepago);","            totalLibre -= (retencionLibre + reteIcaLibre);","            "],"id":48}],[{"start":{"row":72,"column":12},"end":{"row":73,"column":0},"action":"remove","lines":["",""],"id":49}],[{"start":{"row":72,"column":12},"end":{"row":72,"column":16},"action":"remove","lines":["    "],"id":50}],[{"start":{"row":72,"column":12},"end":{"row":72,"column":16},"action":"remove","lines":["    "],"id":51}],[{"start":{"row":72,"column":12},"end":{"row":72,"column":16},"action":"remove","lines":["    "],"id":52}],[{"start":{"row":72,"column":105},"end":{"row":72,"column":112},"action":"remove","lines":["A PAGAR"],"id":53},{"start":{"row":72,"column":105},"end":{"row":72,"column":106},"action":"insert","lines":["R"]}],[{"start":{"row":72,"column":106},"end":{"row":72,"column":107},"action":"insert","lines":["E"],"id":54}],[{"start":{"row":72,"column":107},"end":{"row":72,"column":108},"action":"insert","lines":["C"],"id":55}],[{"start":{"row":72,"column":108},"end":{"row":72,"column":109},"action":"insert","lines":["A"],"id":56}],[{"start":{"row":72,"column":109},"end":{"row":72,"column":110},"action":"insert","lines":["R"],"id":57}],[{"start":{"row":72,"column":110},"end":{"row":72,"column":111},"action":"insert","lines":["G"],"id":58}],[{"start":{"row":72,"column":111},"end":{"row":72,"column":112},"action":"insert","lines":["A"],"id":59}],[{"start":{"row":72,"column":112},"end":{"row":72,"column":113},"action":"insert","lines":["D"],"id":60}],[{"start":{"row":72,"column":113},"end":{"row":72,"column":114},"action":"insert","lines":["O"],"id":61}],[{"start":{"row":7,"column":0},"end":{"row":7,"column":4},"action":"remove","lines":["    "],"id":63}],[{"start":{"row":7,"column":0},"end":{"row":7,"column":4},"action":"remove","lines":["    "],"id":64}],[{"start":{"row":7,"column":0},"end":{"row":14,"column":8},"action":"insert","lines":["var datosDiagrama=[","            {","                value: 1,","                color:\"gray\",","                highlight: \"gray\",","            }","        ];","        "],"id":65}],[{"start":{"row":14,"column":4},"end":{"row":14,"column":8},"action":"remove","lines":["    "],"id":66}],[{"start":{"row":14,"column":0},"end":{"row":14,"column":4},"action":"remove","lines":["    "],"id":67}],[{"start":{"row":13,"column":10},"end":{"row":14,"column":0},"action":"remove","lines":["",""],"id":68}],[{"start":{"row":7,"column":17},"end":{"row":7,"column":18},"action":"insert","lines":["G"],"id":69}],[{"start":{"row":7,"column":18},"end":{"row":7,"column":19},"action":"insert","lines":["r"],"id":70}],[{"start":{"row":7,"column":19},"end":{"row":7,"column":20},"action":"insert","lines":["i"],"id":71}],[{"start":{"row":7,"column":20},"end":{"row":7,"column":21},"action":"insert","lines":["s"],"id":72}],[{"start":{"row":54,"column":50},"end":{"row":55,"column":0},"action":"insert","lines":["",""],"id":73},{"start":{"row":55,"column":0},"end":{"row":55,"column":16},"action":"insert","lines":["                "]}],[{"start":{"row":55,"column":16},"end":{"row":56,"column":76},"action":"insert","lines":["var ctx = document.getElementById(\"canvasHistorial\").getContext(\"2d\");","var diagramaPrepVsLibre = new Chart(ctx).Doughnut(datosDiagrama, options);  "],"id":74}],[{"start":{"row":56,"column":0},"end":{"row":56,"column":4},"action":"insert","lines":["    "],"id":75}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":8},"action":"insert","lines":["    "],"id":76}],[{"start":{"row":56,"column":8},"end":{"row":56,"column":12},"action":"insert","lines":["    "],"id":77}],[{"start":{"row":56,"column":12},"end":{"row":56,"column":16},"action":"insert","lines":["    "],"id":78}],[{"start":{"row":56,"column":79},"end":{"row":56,"column":80},"action":"insert","lines":["G"],"id":79}],[{"start":{"row":56,"column":80},"end":{"row":56,"column":81},"action":"insert","lines":["r"],"id":80}],[{"start":{"row":56,"column":81},"end":{"row":56,"column":82},"action":"insert","lines":["i"],"id":81}],[{"start":{"row":56,"column":82},"end":{"row":56,"column":83},"action":"insert","lines":["s"],"id":82}],[{"start":{"row":56,"column":16},"end":{"row":56,"column":19},"action":"remove","lines":["var"],"id":86}],[{"start":{"row":56,"column":16},"end":{"row":56,"column":17},"action":"remove","lines":[" "],"id":87}],[{"start":{"row":55,"column":16},"end":{"row":55,"column":17},"action":"remove","lines":["v"],"id":88}],[{"start":{"row":55,"column":16},"end":{"row":55,"column":17},"action":"remove","lines":["a"],"id":89}],[{"start":{"row":55,"column":16},"end":{"row":55,"column":17},"action":"remove","lines":["r"],"id":90}],[{"start":{"row":55,"column":16},"end":{"row":55,"column":17},"action":"remove","lines":[" "],"id":91}],[{"start":{"row":54,"column":50},"end":{"row":55,"column":0},"action":"insert","lines":["",""],"id":92},{"start":{"row":55,"column":0},"end":{"row":55,"column":16},"action":"insert","lines":["                "]}],[{"start":{"row":101,"column":12},"end":{"row":101,"column":15},"action":"remove","lines":["var"],"id":94}],[{"start":{"row":101,"column":12},"end":{"row":101,"column":13},"action":"remove","lines":[" "],"id":95}],[{"start":{"row":55,"column":16},"end":{"row":55,"column":46},"action":"insert","lines":["diagramaPrepVsLibre.destroy();"],"id":96}]]},"ace":{"folds":[],"scrolltop":540,"scrollleft":0,"selection":{"start":{"row":55,"column":46},"end":{"row":55,"column":46},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":35,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1450295651977,"hash":"74cd42b03d1e4bcaff020d8b66a4ddc38ee810ca"}